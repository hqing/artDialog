/*!
 * artDialog 4.1.2
 * Date: 2011-08-29 17:25
 * http://code.google.com/p/artdialog/
 * (c) 2009-2011 TangBin, http://www.planeArt.cn
 *
 * This is licensed under the GNU LGPL, version 2.1 or later.
 * For details, see: http://creativecommons.org/licenses/LGPL/2.1/
 */(function(a,b,c){a.noop=a.noop||function(){};var d,e,f,g,h=0,i=a(b),j=a(document),k=a("html"),l=a(function(){l=a("body")}),m=document.documentElement,n=b.VBArray&&!b.XMLHttpRequest,o="createTouch"in document&&!("onmousemove"in m)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),p="artDialog"+(new Date).getTime(),q=function(b,e,f){b=b||{};if(typeof b=="string"||b.nodeType===1)b={content:b,fixed:!o};var g,i=[],j=q.defaults,k=b.follow=this.nodeType===1&&this||b.follow;for(var l in j)b[l]===c&&(b[l]=j[l]);return a.each({ok:"yesFn",cancel:"noFn",close:"closeFn",init:"initFn",okVal:"yesText",cancelVal:"noText"},function(a,d){b[a]=b[a]!==c?b[a]:b[d]}),typeof k=="string"&&(k=a(k)[0]),b.id=k&&k[p+"follow"]||b.id||p+h,g=q.list[b.id],k&&g?g.follow(k).focus():g?g.focus():(o&&(b.fixed=!1),a.isArray(b.button)||(b.button=b.button?[b.button]:[]),e!==c&&(b.ok=e),f!==c&&(b.cancel=f),b.ok&&b.button.push({name:b.okVal,callback:b.ok,focus:!0}),b.cancel&&b.button.push({name:b.cancelVal,callback:b.cancel}),q.defaults.zIndex=b.zIndex,h++,q.list[b.id]=d?d._init(b):new q.fn._init(b))};q.fn=q.prototype={version:"4.1.2",_init:function(a){var c=this,e,f=a.icon,g=f&&(n?{png:"icons/"+f+".png"}:{backgroundImage:"url('"+a.path+"/skins/icons/"+f+".png')"});return c._isRun=!0,c.config=a,c.DOM=e=c.DOM||c._getDOM(),e.wrap.addClass(a.skin),e.close[a.cancel===!1?"hide":"show"](),e.icon[0].style.display=f?"":"none",e.iconBg.css(g||{background:"none"}),e.se.css("cursor",a.resize?"se-resize":"auto"),e.title.css("cursor",a.drag?"move":"auto"),e.content.css("padding",a.padding),c[a.show?"show":"hide"](!0),c.button(a.button).title(a.title).content(a.content,!0).size(a.width,a.height).time(a.time),a.follow?c.follow(a.follow):c.position(a.left,a.top),c.focus(a.focus),a.lock&&c.lock(),c._addEvent(),c._ie6PngFix(),d=null,a.init&&a.init.call(c,b),c},content:function(a){var b,d,e,f,g=this,h=g.DOM,i=h.wrap[0],j=i.offsetWidth,k=i.offsetHeight,l=parseInt(i.style.left),m=parseInt(i.style.top),n=i.style.width,o=h.content,p=o[0];return g._elemBack&&g._elemBack(),i.style.width="auto",a===c?p:(typeof a=="string"?o.html(a):a&&a.nodeType===1&&(f=a.style.display,b=a.previousSibling,d=a.nextSibling,e=a.parentNode,g._elemBack=function(){b&&b.parentNode?b.parentNode.insertBefore(a,b.nextSibling):d&&d.parentNode?d.parentNode.insertBefore(a,d):e&&e.appendChild(a),a.style.display=f,g._elemBack=null},o.html(""),p.appendChild(a),a.style.display="block"),arguments[1]||(g.config.follow?g.follow(g.config.follow):(j=i.offsetWidth-j,k=i.offsetHeight-k,l=l-j/2,m=m-k/2,i.style.left=Math.max(l,0)+"px",i.style.top=Math.max(m,0)+"px"),n&&n!=="auto"&&(i.style.width=i.offsetWidth+"px"),g._autoPositionType()),g._ie6SelectFix(),g._runScript(p),g)},title:function(a){var b=this.DOM,d=b.wrap,e=b.title,f="aui_state_noTitle";return a===c?e[0]:(a===!1?(e.hide().html(""),d.addClass(f)):(e.show().html(a||""),d.removeClass(f)),this)},position:function(a,b){var d=this,e=d.config,f=d.DOM.wrap[0],g=n?!1:e.fixed,h=n&&d.config.fixed,k=j.scrollLeft(),l=j.scrollTop(),m=g?0:k,o=g?0:l,p=i.width(),q=i.height(),r=f.offsetWidth,s=f.offsetHeight,t=f.style;if(a||a===0)d._left=a.toString().indexOf("%")!==-1?a:null,a=d._toNumber(a,p-r),typeof a=="number"&&(a=h?a+=k:a+m),typeof a=="number"?t.left=Math.max(a,m)+"px":typeof a=="string"&&(t.left=a);if(b||b===0)d._top=b.toString().indexOf("%")!==-1?b:null,b==="goldenRatio"?b=(s<4*q/7?q*.382-s/2:(q-s)/2)+o:(b=d._toNumber(b,q-s),typeof b=="number"&&(b=h?b+=l:b+o)),typeof b=="number"?t.top=Math.max(b,o)+"px":typeof b=="string"&&(t.top=b);return a!==c&&b!==c&&(d._follow=null,d._autoPositionType()),d},size:function(a,b){var c,d,e,f,g=this,h=g.config,j=g.DOM,k=j.wrap,l=j.main,m=k[0].style,n=l[0].style;return a&&(g._width=a.toString().indexOf("%")!==-1?a:null,c=i.width()-k[0].offsetWidth+l[0].offsetWidth,e=g._toNumber(a,c),a=e,typeof a=="number"?(m.width="auto",n.width=Math.max(g.config.minWidth,a)+"px",m.width=k[0].offsetWidth+"px"):typeof a=="string"&&(n.width=a,a==="auto"&&k.css("width","auto"))),b&&(g._height=b.toString().indexOf("%")!==-1?b:null,d=i.height()-k[0].offsetHeight+l[0].offsetHeight,f=g._toNumber(b,d),b=f,typeof b=="number"?n.height=Math.max(g.config.minHeight,b)+"px":typeof b=="string"&&(n.height=b)),g._ie6SelectFix(),g},follow:function(b){var c,d=this,e=d.config;if(typeof b=="string"||b&&b.nodeType===1)c=a(b),b=c[0];if(!b||!b.offsetWidth&&!b.offsetHeight)return d.position(d._left,d._top);var f=p+"follow",g=i.width(),h=i.height(),k=j.scrollLeft(),l=j.scrollTop(),m=c.offset(),o=b.offsetWidth,q=b.offsetHeight,r=n?!1:e.fixed,s=r?m.left-k:m.left,t=r?m.top-l:m.top,u=d.DOM.wrap[0],v=u.style,w=u.offsetWidth,x=u.offsetHeight,y=s-(w-o)/2,z=t+q,A=r?0:k,B=r?0:l;return y=y<A?s:y+w>g&&s-w>A?s-w+o:y,z=z+x>h+B&&t-x>B?t-x:z,v.left=y+"px",v.top=z+"px",d._follow&&d._follow.removeAttribute(f),d._follow=b,b[f]=e.id,d._autoPositionType(),d},button:function(){var b=this,d=arguments,e=b.DOM,f=e.wrap,g=e.buttons,h=g[0],i="aui_state_highlight",j=b._listeners=b._listeners||{},k=a.isArray(d[0])?d[0]:[].slice.call(d);return d[0]===c?h:(a.each(k,function(c,d){var e=d.name,f=!j[e],g=f?document.createElement("button"):j[e].elem;j[e]||(j[e]={}),d.callback&&(j[e].callback=d.callback),d.className&&(g.className=d.className),d.focus&&(b._focus&&b._focus.removeClass(i),b._focus=a(g).addClass(i),b.focus()),g[p+"callback"]=e,g.disabled=!!d.disabled,f&&(g.innerHTML=e,j[e].elem=g,h.appendChild(g))}),g[0].style.display=k.length?"":"none",b._ie6SelectFix(),b)},show:function(){return this.DOM.wrap.show(),!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.show(),this},hide:function(){return this.DOM.wrap.hide(),!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.hide(),this},close:function(){if(!this._isRun)return this;var a=this,c=a.DOM,e=c.wrap,f=q.list,g=a.config.close,h=a.config.follow;a.time();if(typeof g=="function"&&g.call(a,b)===!1)return a;a.unlock(),a._elemBack&&a._elemBack(),e[0].className=e[0].style.cssText="",c.title.html(""),c.content.html(""),c.buttons.html(""),q.focus===a&&(q.focus=null),h&&h.removeAttribute(p+"follow"),delete f[a.config.id],a._removeEvent(),a.hide(!0)._setAbsolute();for(var i in a)a.hasOwnProperty(i)&&i!=="DOM"&&delete a[i];return d?e.remove():d=a,a},time:function(a){var b=this,c=b.config.cancelVal,d=b._timer;return d&&clearTimeout(d),a&&(b._timer=setTimeout(function(){b._trigger(c)},1e3*a)),b},focus:function(){var a,b=this,c=b.DOM,d=c.wrap,e=q.focus,f=q.defaults.zIndex++;d.css("zIndex",f),b._lockMask&&b._lockMask.css("zIndex",f-1),e&&e.DOM.wrap.removeClass("aui_state_focus"),q.focus=b,d.addClass("aui_state_focus");if(!arguments[0])try{a=b._focus&&b._focus[0]||c.close[0],a&&a.focus()}catch(g){}return b},lock:function(){if(this._lock)return this;var b=this,c=q.defaults.zIndex-1,d=b.DOM.wrap,e=b.config,f=j.width(),g=j.height(),h=b._lockMaskWrap||a(l[0].appendChild(document.createElement("div"))),i=b._lockMask||a(h[0].appendChild(document.createElement("div"))),k="(document).documentElement",m=o?"width:"+f+"px;height:"+g+"px":"width:100%;height:100%",p=n?"position:absolute;left:expression("+k+".scrollLeft);top:expression("+k+".scrollTop);width:expression("+k+".clientWidth);height:expression("+k+".clientHeight)":"";return b.focus(!0),d.addClass("aui_state_lock"),h[0].style.cssText=m+";position:fixed;z-index:"+c+";top:0;left:0;overflow:hidden;"+p,i[0].style.cssText="height:100%;background:"+e.background+";filter:alpha(opacity=0);opacity:0",n&&i.html('<iframe src="about:blank" style="width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;filter:alpha(opacity=0)"></iframe>'),i.stop(),i[0].ondblclick=function(){b.close()},e.duration===0?i.css({opacity:e.opacity}):i.animate({opacity:e.opacity},e.duration),b._lockMaskWrap=h,b._lockMask=i,b._lock=!0,b},unlock:function(a){var b=this,c=b._lockMaskWrap,e=b._lockMask;if(!b._lock)return b;var f=c[0].style,g=function(){n&&(f.removeExpression("width"),f.removeExpression("height"),f.removeExpression("left"),f.removeExpression("top")),f.cssText="display:none",d&&(c.remove(),b._lockMaskWrap=b._lockMask=null)};return e.stop(),e[0].ondblclick=null,b.DOM.wrap.removeClass("aui_state_lock"),b.config.duration===0?g():e.animate({opacity:0},b.config.duration,g),b._lock=!1,b},_getDOM:function(){var b=document.createElement("div");b.style.cssText="position:absolute;left:0;top:0",b.innerHTML=q.templates,document.body.appendChild(b);var c,d=0,e={wrap:a(b)},f=b.getElementsByTagName("*"),g=f.length;for(;d<g;d++)c=f[d].className.split("aui_")[1],c&&(e[c]=a(f[d]));return e},_toNumber:function(a,b){if(!a&&a!==0||typeof a=="number")return a;var c=a.length-1;return a.lastIndexOf("px")===c?a=parseInt(a):a.lastIndexOf("%")===c&&(a=parseInt(b*a.split("%")[0]/100)),a},_ie6PngFix:n?function(){var a=0,b,c,d,e,f=q.defaults.path+"/skins/",g=this.DOM.wrap[0].getElementsByTagName("*");for(;a<g.length;a++)b=g[a],c=b.currentStyle.png,c&&(d=f+c,e=b.runtimeStyle,e.backgroundImage="none",e.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+d+"',sizingMethod='crop')")}:a.noop,_ie6SelectFix:n?function(){var a=this.DOM.wrap,b=a[0],c=p+"iframeMask",d=a[c],e=b.offsetWidth,f=b.offsetHeight;e=e+"px",f=f+"px",d?(d.style.width=e,d.style.height=f):(d=b.appendChild(document.createElement("iframe")),a[c]=d,d.src="about:blank",d.style.cssText="position:absolute;z-index:-1;left:0;top:0;filter:alpha(opacity=0);width:"+e+";height:"+f)}:a.noop,_runScript:function(a){var b,c=0,d=0,e=a.getElementsByTagName("script"),f=e.length,g=[];for(;c<f;c++)e[c].type==="text/dialog"&&(g[d]=e[c].innerHTML,d++);g.length&&(g=g.join(""),b=new Function(g),b.call(this))},_autoPositionType:function(){this[this.config.fixed?"_setFixed":"_setAbsolute"]()},_setFixed:function(){return n&&a(function(){var a="backgroundAttachment";k.css(a)!=="fixed"&&l.css(a)!=="fixed"&&k.css({backgroundImage:"url(about:blank)",backgroundAttachment:"fixed"})}),function(){var a=this.DOM.wrap,b=a[0].style;if(n){var c=parseInt(a.css("left")),d=parseInt(a.css("top")),e=j.scrollLeft(),f=j.scrollTop(),g="(document.documentElement)";this._setAbsolute(),b.setExpression("left","eval("+g+".scrollLeft + "+(c-e)+') + "px"'),b.setExpression("top","eval("+g+".scrollTop + "+(d-f)+') + "px"')}else b.position="fixed"}}(),_setAbsolute:function(){var a=this.DOM.wrap[0].style;n&&(a.removeExpression("left"),a.removeExpression("top")),a.position="absolute"},_trigger:function(a){var c=this,d=c._listeners[a]&&c._listeners[a].callback;return typeof d!="function"||d.call(c,b)!==!1?c.close():c},_addEvent:function(){var a,b,c=this,d=c.config,e=c.DOM,f="all"in document,g=i.width()*i.height();a=function(){var a,b=g,d=c._follow,e=c._width,h=c._height,j=c._left,k=c._top;if(f){a=i.width()*i.height(),g=a;if(b===a)return}(e||h)&&c.size(e,h),d?c.follow(d):(j||k)&&c.position(j,k)},c._winResize=function(){b&&clearTimeout(b),b=setTimeout(function(){a()},40)},i.bind("resize",c._winResize),e.wrap.bind("click",function(a){var b=a.target,f;if(b.disabled)return!1;if(b===e.close[0])return c._trigger(d.cancelVal),!1;f=b[p+"callback"],f&&c._trigger(f),c._ie6SelectFix()}).bind("mousedown",function(){c.focus(!0)})},_removeEvent:function(){var a=this,b=a.DOM;b.wrap.unbind(),i.unbind("resize",a._winResize)}},q.fn._init.prototype=q.fn,a.fn.dialog=a.fn.artDialog=function(){var a=arguments;return this[this.live?"live":"bind"]("click",function(){return q.apply(this,a),!1}),this},q.focus=null,q.list={},j.bind("keydown",function(a){var b=a.target,c=b.nodeName,d=/^INPUT|TEXTAREA$/,e=q.focus,f=a.keyCode;if(!e||!e.config.esc||d.test(c))return;f===27&&e._trigger(e.config.cancelVal)}),g=b._artDialog_path||function(a,b,c){for(b in a)a[b].src&&a[b].src.indexOf("artDialog")!==-1&&(c=a[b]);return e=c||a[a.length-1],c=e.src.replace(/\\/g,"/"),c.lastIndexOf("/")<0?".":c.substring(0,c.lastIndexOf("/"))}(document.getElementsByTagName("script")),f=e.src.split("skin=")[1];if(f){var r=document.createElement("link");r.rel="stylesheet",r.href=g+"/skins/"+f+".css?"+q.fn.version,e.parentNode.insertBefore(r,e)}i.bind("load",function(){setTimeout(function(){if(h)return;q({left:"-9999em",time:9,fixed:!1,lock:!1,focus:!1})},150)});try{document.execCommand("BackgroundImageCache",!1,!0)}catch(s){}q.templates='<div class="aui_outer"><table class="aui_border"><tbody><tr><td class="aui_nw"></td><td class="aui_n"></td><td class="aui_ne"></td></tr><tr><td class="aui_w"></td><td class="aui_center"><table class="aui_inner"><tbody><tr><td colspan="2" class="aui_header"><div class="aui_titleBar"><div class="aui_title"></div><a class="aui_close" href="javascript:/*artDialog*/;">\u00d7</a></div></td></tr><tr><td class="aui_icon"><div class="aui_iconBg"></div></td><td class="aui_main"><div class="aui_content"></div></td></tr><tr><td colspan="2" class="aui_footer"><div class="aui_buttons"></div></td></tr></tbody></table></td><td class="aui_e"></td></tr><tr><td class="aui_sw"></td><td class="aui_s"></td><td class="aui_se"></td></tr></tbody></table></div>',q.defaults={content:'<div class="aui_loading"><span>loading..</span></div>',title:"\u6d88\u606f",button:null,ok:null,cancel:null,init:null,close:null,okVal:"\u786e\u5b9a",cancelVal:"\u53d6\u6d88",width:"auto",height:"auto",minWidth:96,minHeight:32,padding:"20px 25px",skin:"",icon:null,time:null,esc:!0,focus:!0,show:!0,follow:null,path:g,lock:!1,background:"#000",opacity:.7,duration:300,fixed:!1,left:"50%",top:"goldenRatio",zIndex:1987,resize:!0,drag:!0},b.artDialog=a.dialog=a.artDialog=q})(window.jQuery&&(window.art=jQuery)||window.art,this),function(a){var b,c,d=a(window),e=a(document),f=document.documentElement,g=!-[1]&&!("minWidth"in f.style),h="onlosecapture"in f,i="setCapture"in f;artDialog.dragEvent=function(){var a=this,b=function(b){var c=a[b];a[b]=function(){return c.apply(a,arguments)}};b("start"),b("move"),b("end")},artDialog.dragEvent.prototype={onstart:a.noop,start:function(a){return e.bind("mousemove",this.move).bind("mouseup",this.end),this._sClientX=a.clientX,this._sClientY=a.clientY,this.onstart(a.clientX,a.clientY),!1},onmove:a.noop,move:function(a){return this._mClientX=a.clientX,this._mClientY=a.clientY,this.onmove(a.clientX-this._sClientX,a.clientY-this._sClientY),!1},onend:a.noop,end:function(a){return e.unbind("mousemove",this.move).unbind("mouseup",this.end),this.onend(a.clientX,a.clientY),!1}},c=function(a){var c,f,j,k,l,m,n=artDialog.focus,o=n.config,p=n.DOM,q=p.wrap,r=p.title,s=p.main,t="getSelection"in window?function(){window.getSelection().removeAllRanges()}:function(){try{document.selection.empty()}catch(a){}};b.onstart=function(a,c){m?(f=s[0].offsetWidth,j=s[0].offsetHeight):(k=q[0].offsetLeft,l=q[0].offsetTop),e.bind("dblclick",b.end),!g&&h?r.bind("losecapture",b.end):d.bind("blur",b.end),i&&r[0].setCapture(),q.addClass("aui_state_drag"),n.focus()},b.onmove=function(a,b){if(m){var d=q[0].style,e=s[0].style,g=a+f,h=b+j;d.width="auto",e.width=Math.max(0,g)+"px",o.width=q[0].offsetWidth,d.width=o.width+"px",o.height=Math.max(0,h),e.height=o.height+"px"}else{var e=q[0].style,i=a+k,p=b+l;o.left=Math.max(c.minX,Math.min(c.maxX,i)),o.top=Math.max(c.minY,Math.min(c.maxY,p)),e.left=o.left+"px",e.top=o.top+"px"}t(),n._ie6SelectFix()},b.onend=function(a,c){e.unbind("dblclick",b.end),!g&&h?r.unbind("losecapture",b.end):d.unbind("blur",b.end),i&&r[0].releaseCapture(),g&&n._autoPositionType(),q.removeClass("aui_state_drag")},m=a.target===p.se[0]?!0:!1,c=function(){var a,b,c=n.DOM.wrap[0],f=c.style.position==="fixed",g=c.offsetWidth,h=c.offsetHeight,i=d.width(),j=d.height(),k=f?0:e.scrollLeft(),l=f?0:e.scrollTop(),a=i-g+k;return b=j-h+l,{minX:k,minY:l,maxX:a,maxY:b}}(),b.start(a)},e.bind("mousedown",function(a){var d=artDialog.focus;if(!d)return;var e=a.target,f=d.config,g=d.DOM;if(f.drag!==!1&&e===g.title[0]||f.resize!==!1&&e===g.se[0])return b=b||new artDialog.dragEvent,c(a),!1})}(window.jQuery||window.art)