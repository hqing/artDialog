/*!
 * artDialog basic
 * Date: 2011-09-04 30:36
 * http://code.google.com/p/artdialog/
 * (c) 2009-2011 TangBin, http://www.planeArt.cn
 *
 * This is licensed under the GNU LGPL, version 2.1 or later.
 * For details, see: http://creativecommons.org/licenses/LGPL/2.1/
 */(function(a,b){function f(a,b,c){b=b||document,c=c||"*";var d=0,e=0,f=[],g=b.getElementsByTagName(c),h=g.length,i=new RegExp("(^|\\s)"+a+"(\\s|$)");for(;d<h;d++)i.test(g[d].className)&&(f[e]=g[d],e++);return f}function g(d){var e=c.expando,f=d===a?0:d[e];return f===b&&(d[e]=f=++c.uuid),f}function h(a){return c.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}if(a.jQuery)return jQuery;var c=a.art=function(a,b){return new c.fn.init(a,b)},d=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,e=/[\n\t]/g;return a.$===b&&(a.$=c),c.fn=c.prototype={constructor:c,hasClass:function(a){var b=" "+a+" ";return(" "+this[0].className+" ").replace(e," ").indexOf(b)>-1?!0:!1},addClass:function(a){return this.hasClass(a)||(this[0].className+=" "+a),this},removeClass:function(a){var b=this[0];return a?this.hasClass(a)&&(b.className=b.className.replace(a," ")):b.className="",this},css:function(a,d){var e,f=this[0],g=arguments[0];if(typeof a=="string"){if(d===b)return c.css(f,a);f.style[a]=d}else for(e in g)f.style[e]=g[e];return this},show:function(){return this.css("display","block")},hide:function(){return this.css("display","none")},offset:function(){var a=this[0],b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=e.clientTop||d.clientTop||0,g=e.clientLeft||d.clientLeft||0,h=b.top+(self.pageYOffset||e.scrollTop)-f,i=b.left+(self.pageXOffset||e.scrollLeft)-g;return{left:i,top:h}},html:function(a){var d=this[0];return a===b?d.innerHTML:(c.cleanData(d.getElementsByTagName("*")),d.innerHTML=a,this)},remove:function(){var a=this[0];return c.cleanData(a.getElementsByTagName("*")),c.cleanData([a]),a.parentNode.removeChild(a),this},bind:function(a,b){return c.event.add(this[0],a,b),this},unbind:function(a,b){return c.event.remove(this[0],a,b),this}},c.fn.init=function(a,b){var c,e;b=b||document;if(!a)return this;if(a.nodeType)return this[0]=a,this;if(typeof a=="string"){c=d.exec(a);if(c&&c[2])return e=b.getElementById(c[2]),e&&e.parentNode&&(this[0]=e),this}return this[0]=a,this},c.fn.init.prototype=c.fn,c.noop=function(){},c.isWindow=function(a){return a&&typeof a=="object"&&"setInterval"in a},c.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},c.fn.find=function(a){var b,d=this[0],e=a.split(".")[1];return e?document.getElementsByClassName?b=d.getElementsByClassName(e):b=f(e,d):b=d.getElementsByTagName(a),c(b[0])},c.each=function(a,c){var d,e=0,f=a.length,g=f===b;if(g){for(d in a)if(c.call(a[d],d,a[d])===!1)break}else for(var h=a[0];e<f&&c.call(h,e,h)!==!1;h=a[++e]);return a},c.data=function(a,d,e){var f=c.cache,h=g(a);return d===b?f[h]:(f[h]||(f[h]={}),e!==b&&(f[h][d]=e),f[h][d])},c.removeData=function(a,b){var d=!0,e=c.expando,f=c.cache,h=g(a),i=h&&f[h];if(!i)return;if(b){delete i[b];for(var j in i)d=!1;d&&delete c.cache[h]}else delete f[h],a.removeAttribute?a.removeAttribute(e):a[e]=null},c.uuid=0,c.cache={},c.expando="@cache"+(new Date).getTime(),c.event={add:function(a,b,d){var e,f,g=c.event,h=c.data(a,"@events")||c.data(a,"@events",{});e=h[b]=h[b]||{},f=e.listeners=e.listeners||[],f.push(d),e.handler||(e.elem=a,e.handler=g.handler(e),document.addEventListener?a.addEventListener(b,e.handler,!1):a.attachEvent("on"+b,e.handler))},remove:function(a,b,d){var e,f,g,h=c.event,i=!0,j=c.data(a,"@events");if(!j)return;if(!b){for(e in j)h.remove(a,e);return}f=j[b];if(!f)return;g=f.listeners;if(d)for(e=0;e<g.length;e++)g[e]===d&&g.splice(e--,1);else f.listeners=[];if(f.listeners.length===0){document.removeEventListener?a.removeEventListener(b,f.handler,!1):a.detachEvent("on"+b,f.handler),delete j[b],f=c.data(a,"@events");for(var k in f)i=!1;i&&c.removeData(a,"@events")}},handler:function(b){return function(d){d=c.event.fix(d||a.event);for(var e=0,f=b.listeners,g;g=f[e++];)g.call(b.elem,d)===!1&&(d.preventDefault(),d.stopPropagation())}},fix:function(a){if(a.target)return a;var b={target:a.srcElement||document,preventDefault:function(){a.returnValue=!1},stopPropagation:function(){a.cancelBubble=!0}};for(var c in a)b[c]=a[c];return b}},c.cleanData=function(a){var b=0,d,e=a.length,f=c.event.remove,g=c.removeData;for(;b<e;b++)d=a[b],f(d),g(d)},c.css="defaultView"in document&&"getComputedStyle"in document.defaultView?function(a,b){return document.defaultView.getComputedStyle(a,!1)[b]}:function(a,b){return a.currentStyle[b]||""},c.each(["Left","Top"],function(a,b){var d="scroll"+b;c.fn[d]=function(b){var c=this[0],e;return e=h(c),e?"pageXOffset"in e?e[a?"pageYOffset":"pageXOffset"]:e.document.documentElement[d]||e.document.body[d]:c[d]}}),c.each(["Height","Width"],function(a,b){var d=b.toLowerCase();c.fn[d]=function(a){var d=this[0];return d?c.isWindow(d)?d.document.documentElement["client"+b]||d.document.body["client"+b]:d.nodeType===9?Math.max(d.documentElement["client"+b],d.body["scroll"+b],d.documentElement["scroll"+b],d.body["offset"+b],d.documentElement["offset"+b]):null:a==null?null:this}}),c})(window),function(a,b,c){a.noop=a.noop||function(){};var d,e=0,f=a(b),g=a(document),h=document.documentElement,i=b.VBArray&&!b.XMLHttpRequest,j="createTouch"in document&&!("onmousemove"in h)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),k=!i&&!j,l="artDialog"+(new Date).getTime(),m=function(b,f,g){b=b||{};if(typeof b=="string"||b.nodeType===1)b={content:b,fixed:!j};var h,i=[],n=m.defaults,o=b.follow=this.nodeType===1&&this||b.follow;for(var p in n)b[p]===c&&(b[p]=n[p]);return a.each({ok:"yesFn",cancel:"noFn",close:"closeFn",init:"initFn",okVal:"yesText",cancelVal:"noText"},function(a,d){b[a]=b[a]!==c?b[a]:b[d]}),typeof o=="string"&&(o=a(o)[0]),b.id=o&&o[l+"follow"]||b.id||l+e,h=m.list[b.id],o&&h?h.follow(o).focus():h?h.focus():(k||(b.fixed=!1),a.isArray(b.button)||(b.button=b.button?[b.button]:[]),f!==c&&(b.ok=f),g!==c&&(b.cancel=g),b.ok&&b.button.push({name:b.okVal,callback:b.ok,focus:!0}),b.cancel&&b.button.push({name:b.cancelVal,callback:b.cancel}),m.defaults.zIndex=b.zIndex,e++,m.list[b.id]=d?d._init(b):new m.fn._init(b))};m.fn=m.prototype={_init:function(a){var b=this,c;return b._isRun=!0,b.config=a,b.DOM=c=b.DOM||b._getDOM(),c.wrap.addClass(a.skin),c.wrap.css("position",a.fixed?"fixed":"absolute"),c.close[a.cancel===!1?"hide":"show"](),c.se.css("cursor",a.resize?"se-resize":"auto"),c.title.css("cursor",a.drag?"move":"auto"),c.content.css("padding",a.padding),b[a.show?"show":"hide"](!0).button(a.button).title(a.title).content(a.content).size(a.width,a.height).time(a.time),a.follow?b.follow(a.follow):b.position(),b.focus(a.focus),a.lock&&b.lock(),b._addEvent(),d=null,a.init&&a.init.call(b),b},content:function(a){var b,d,e,f,g=this,h=g.DOM.content,i=h[0];return g._elemBack&&g._elemBack(),a===c?i:(typeof a=="string"?h.html(a):a&&a.nodeType===1&&(f=a.style.display,b=a.previousSibling,d=a.nextSibling,e=a.parentNode,g._elemBack=function(){b&&b.parentNode?b.parentNode.insertBefore(a,b.nextSibling):d&&d.parentNode?d.parentNode.insertBefore(a,d):e&&e.appendChild(a),a.style.display=f,g._elemBack=null},h.html(""),i.appendChild(a),a.style.display="block"),g.position())},title:function(a){var b=this.DOM,d=b.wrap,e=b.title,f="aui_state_noTitle";return a===c?e[0]:(a===!1?(e.hide().html(""),d.addClass(f)):(e.show().html(a),d.removeClass(f)),this)},position:function(){var a=this,b=a.DOM.wrap[0],c=a.config.fixed,d=c?0:g.scrollLeft(),e=c?0:g.scrollTop(),h=f.width(),i=f.height(),j=b.offsetWidth,k=b.offsetHeight,l=(h-j)/2+d,m=m=(k<4*i/7?i*.382-k/2:(i-k)/2)+e,n=b.style;return n.left=Math.max(l,d)+"px",n.top=Math.max(m,e)+"px",a},size:function(a,b){var c=this.DOM.main[0].style;return typeof a=="number"&&(a=a+"px"),typeof b=="number"&&(b=b+"px"),c.width=a,c.height=b,this},follow:function(b){var c,d=this,e=d.config;if(typeof b=="string"||b&&b.nodeType===1)c=a(b),b=c[0];if(!b||!b.offsetWidth&&!b.offsetHeight)return d.position(d._left,d._top);var h=e.fixed,i=l+"follow",j=f.width(),k=f.height(),m=g.scrollLeft(),n=g.scrollTop(),o=c.offset(),p=b.offsetWidth,q=b.offsetHeight,r=h?o.left-m:o.left,s=h?o.top-n:o.top,t=d.DOM.wrap[0],u=t.style,v=t.offsetWidth,w=t.offsetHeight,x=r-(v-p)/2,y=s+q,z=h?0:m,A=h?0:n;return x=x<z?r:x+v>j&&r-v>z?r-v+p:x,y=y+w>k+A&&s-w>A?s-w:y,u.left=x+"px",u.top=y+"px",d._follow&&d._follow.removeAttribute(i),d._follow=b,b[i]=e.id,d},button:function(){var b=this,d=arguments,e=b.DOM,f=e.wrap,g=e.buttons,h=g[0],i="aui_state_highlight",j=b._listeners=b._listeners||{},k=a.isArray(d[0])?d[0]:[].slice.call(d);return d[0]===c?h:(a.each(k,function(c,d){var e=d.name,f=!j[e],g=f?document.createElement("button"):j[e].elem;j[e]||(j[e]={}),d.callback&&(j[e].callback=d.callback),d.className&&(g.className=d.className),d.focus&&(b._focus&&b._focus.removeClass(i),b._focus=a(g).addClass(i),b.focus()),g[l+"callback"]=e,g.disabled=!!d.disabled,f&&(g.innerHTML=e,j[e].elem=g,h.appendChild(g))}),g[0].style.display=k.length?"":"none",b)},show:function(){return this.DOM.wrap.show(),!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.show(),this},hide:function(){return this.DOM.wrap.hide(),!arguments[0]&&this._lockMaskWrap&&this._lockMaskWrap.hide(),this},close:function(){var a=this,b=a.DOM,c=b.wrap,e=m.list,f=a.config.close,g=a.config.follow;if(a._isClose)return a;a.time();if(typeof f=="function"&&f.call(a)===!1)return a;a.unlock(),a._elemBack&&a._elemBack(),c[0].className=c[0].style.cssText="",b.title.html(""),b.content.html(""),b.buttons.html(""),m.focus===a&&(m.focus=null),g&&g.removeAttribute(l+"follow"),delete e[a.config.id],a._isClose=!0,a._removeEvent(),a.hide(!0);for(var h in a)a.hasOwnProperty(h)&&h!=="DOM"&&delete a[h];return d?c.remove():d=a,a},time:function(a){var b=this,c=b.config.cancelVal,d=b._timer;return d&&clearTimeout(d),a&&(b._timer=setTimeout(function(){b._click(c)},1e3*a)),b},focus:function(){var a,b=this,c=b.DOM,d=c.wrap,e=m.focus,f=m.defaults.zIndex++;d.css("zIndex",f),b._lockMask&&b._lockMask.css("zIndex",f-1),e&&e.DOM.wrap.removeClass("aui_state_focus"),m.focus=b,d.addClass("aui_state_focus");if(!arguments[0])try{a=b._focus&&b._focus[0]||c.close[0],a&&a.focus()}catch(g){}return b},lock:function(){if(this._lock)return this;var b=this,c=m.defaults.zIndex-1,d=b.DOM.wrap,e=b.config,h="filter:alpha(opacity="+e.opacity*100+");opacity:"+e.opacity,i=f.width(),j=g.height(),l=b._lockMaskWrap||a(document.body.appendChild(document.createElement("div"))),n=b._lockMask||a(l[0].appendChild(document.createElement("div"))),o=k?"position:fixed;width:100%;height:100%":"position:absolute;width:"+i+"px;height:"+j+"px";return b.focus(!0),d.addClass("aui_state_lock"),l[0].style.cssText=o+";z-index:"+c+";top:0;left:0;overflow:hidden;",n[0].style.cssText="height:100%;background:"+e.background+";"+h,n.bind("click",function(){b._reset()}).bind("dblclick",function(){b.close()}),b._lockMaskWrap=l,b._lockMask=n,b._lock=!0,b},unlock:function(){var a=this;return a._lock?(a.DOM.wrap.removeClass("aui_state_lock"),a._lockMask.unbind(),a._lockMaskWrap.hide(),a._lock=!1,d&&a._lockMaskWrap.remove(),a):a},_getDOM:function(){var b=document.createElement("div");b.style.cssText="position:absolute;left:0;top:0",b.innerHTML=m.templates,document.body.appendChild(b);var c,d=0,e={wrap:a(b)},f=b.getElementsByTagName("*"),g=f.length;for(;d<g;d++)c=f[d].className.split("aui_")[1],c&&(e[c]=a(f[d]));return e},_click:function(a){var b=this,c=b._listeners[a]&&b._listeners[a].callback;return typeof c!="function"||c.call(b)!==!1?b.close():b},_reset:function(a){var b,c=this,d=c._winSize||f.width()*f.height(),e=c.config.follow;if(a){b=c._winSize=f.width()*f.height();if(d===b)return}e?c.follow(e):c.position()},_addEvent:function(){var a,c=this,d=c.DOM,e="CollectGarbage"in b,g=f.width()*f.height();c._winResize=function(){a&&clearTimeout(a),a=setTimeout(function(){c._reset(e)},40)},f.bind("resize",c._winResize),d.wrap.bind("click",function(a){var b=a.target,e;if(b.disabled)return!1;if(b===d.close[0])return c._click(c.config.cancelVal),!1;e=b[l+"callback"],e&&c._click(e)}).bind("mousedown",function(){c.focus(!0)})},_removeEvent:function(){var a=this,b=a.DOM;b.wrap.unbind(),f.unbind("resize",a._winResize)}},m.fn._init.prototype=m.fn,a.fn.dialog=a.fn.artDialog=function(){var a=arguments;return this[this.live?"live":"bind"]("click",function(){return m.apply(this,a),!1}),this},m.focus=null,m.list={},g.bind("keydown",function(a){var b=a.target,c=b.nodeName,d=/^INPUT|TEXTAREA$/,e=m.focus,f=a.keyCode;if(!e||!e.config.esc||d.test(c))return;f===27&&e._click(e.config.cancelVal)}),m.templates='<div class="aui_outer"><table class="aui_border"><tbody><tr><td class="aui_nw"></td><td class="aui_n"></td><td class="aui_ne"></td></tr><tr><td class="aui_w"></td><td class="aui_c"><div class="aui_inner"><table class="aui_dialog"><tbody><tr><td class="aui_header"><div class="aui_titleBar"><div class="aui_title"></div><a class="aui_close" href="javascript:/*artDialog*/;">\u00d7</a></div></td></tr><tr><td class="aui_main"><div class="aui_content"></div></td></tr><tr><td class="aui_footer"><div class="aui_buttons"></div></td></tr></tbody></table></div></td><td class="aui_e"></td></tr><tr><td class="aui_sw"></td><td class="aui_s"></td><td class="aui_se"></td></tr></tbody></table></div>',m.defaults={content:'<div class="aui_loading"><span>loading..</span></div>',title:"\u6d88\u606f",button:null,ok:null,cancel:null,init:null,close:null,okVal:"\u786e\u5b9a",cancelVal:"\u53d6\u6d88",width:"auto",height:"auto",padding:"20px 25px",skin:"",time:null,esc:!0,focus:!0,show:!0,follow:null,lock:!1,background:"#000",opacity:.7,fixed:!1,zIndex:1987},b.artDialog=a.dialog=a.artDialog=m}(window.jQuery&&(window.art=jQuery)||window.art,this)